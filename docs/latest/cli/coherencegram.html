<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Coherence-spectrogram or coherencegram &#8212; GWpy 0.10.0+46.g3416931c documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/gwpy-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.10.0+46.g3416931c',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/copybutton.js"></script>
    <script type="text/javascript" src="../_static/js/gwpy_https.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Interactive mode" href="interactive.html" />
    <link rel="prev" title="Spectrogram" href="spectrogram.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          GWpy</a>
        <span class="navbar-text navbar-version pull-left"><b>0.10.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../examples/index.html">Examples</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Contents <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">What is GWpy?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html#available-installations-for-the-ligo-scientific-collaboration">Available installations for the LIGO Scientific Collaboration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing GWpy</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../timeseries/index.html">Time-domain data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../signal/index.html">Signal processing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../segments/index.html">Data-quality segments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timeseries/statevector.html">The <code class="docutils literal"><span class="pre">StateTimeSeries</span></code> and <code class="docutils literal"><span class="pre">StateVector</span></code></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../spectrum/index.html">The <code class="docutils literal"><span class="pre">FrequencySeries</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../spectrogram/index.html">The <code class="docutils literal"><span class="pre">Spectrogram</span></code></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../table/index.html">Tabular data</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../plotter/index.html">Plotting in GWpy (<code class="docutils literal"><span class="pre">gwpy.plotter</span></code>)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Command line plotting with GWpy</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../detector/channel.html">The <code class="docutils literal"><span class="pre">Channel</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../time/index.html">Times and timestamps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../astro/index.html">Astrophysical modelling</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev/release.html">Publishing a release</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">GWpy examples</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="spectrogram.html" title="Previous Chapter: Spectrogram"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Spectrogram</span>
    </a>
  </li>
  <li>
    <a href="interactive.html" title="Next Chapter: Interactive mode"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Interactive mode &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Coherence-spectrogram or coherencegram</a></li>
</ul>

<div id="sourcelink">
  <a href="../_sources/cli/coherencegram.rst.txt"
     rel="nofollow">Source</a>
</div>
<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="coherence-spectrogram-or-coherencegram">
<h1>Coherence-spectrogram or coherencegram<a class="headerlink" href="#coherence-spectrogram-or-coherencegram" title="Permalink to this headline">Â¶</a></h1>
<p>The coherence spectrogram plots multiple coherence calculations in an image similar to a spectrogram.</p>
<p>The parameters are similar to coherence and spectrograms with the FFTs, normalization and color bar.
Two channels must be specified.  The color bar is linear by default with the color range set from 0
to one.</p>
<p>A single coherence measurement is very noisy so the process requires at least 32 coherence calculations
per column in the image.  The default settings are short (0.5 second) calculations with a high (0.9)
overlap.  This seems to give a good balance between SNR and time resolution.</p>
<p>The following parameters will produce the sample image below:</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span>gwpy-plot coherencegram --chan L1:LSC-SRCL_IN1_DQ L1:LSC-CARM_IN1_DQ <span class="se">\</span>
    --start <span class="m">1107820816</span> --duration <span class="m">900</span> <span class="se">\</span>
    --ref L1:LSC-SRCL_IN1_DQ --secpfft 0.500 --overlap 0.90
</pre></div>
</div>
<img alt="SRCL, CARM coherencegram" class="align-center" src="../_images/cli-cohg-01.png" />
<p>Compare that image with the line plot of coherence over the entire interval at much higher frequency
resolution:</p>
<img alt="SRCL, CARM coherence" class="align-center" src="../_images/cli-coh-01.png" />
<p>The full help text for this plot product is:</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span>$ gwpy-plot coherencegram --help
usage: gwpy-plot coherencegram <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-v<span class="o">]</span> <span class="o">[</span>-s SILENT<span class="o">]</span> --chan CHAN <span class="o">[</span>CHAN ...<span class="o">]</span>
                           <span class="o">[</span>--ref REF<span class="o">]</span> --start START <span class="o">[</span>START ...<span class="o">]</span>
                           <span class="o">[</span>--duration DURATION<span class="o">]</span> <span class="o">[</span>-c FRAMECACHE<span class="o">]</span>
                           <span class="o">[</span>--highpass HIGHPASS<span class="o">]</span> <span class="o">[</span>--secpfft SECPFFT<span class="o">]</span>
                           <span class="o">[</span>--overlap OVERLAP<span class="o">]</span> <span class="o">[</span>--logx<span class="o">]</span> <span class="o">[</span>--epoch EPOCH<span class="o">]</span>
                           <span class="o">[</span>--xmin XMIN<span class="o">]</span> <span class="o">[</span>--xmax XMAX<span class="o">]</span> <span class="o">[</span>--nologf<span class="o">]</span>
                           <span class="o">[</span>--fmin FMIN<span class="o">]</span> <span class="o">[</span>--fmax FMAX<span class="o">]</span> <span class="o">[</span>--logcolors<span class="o">]</span>
                           <span class="o">[</span>--imin IMIN<span class="o">]</span> <span class="o">[</span>--imax IMAX<span class="o">]</span> <span class="o">[</span>--nopct<span class="o">]</span>
                           <span class="o">[</span>--nocolorbar<span class="o">]</span> <span class="o">[</span>--norm<span class="o">]</span> <span class="o">[</span>-g GEOMETRY<span class="o">]</span>
                           <span class="o">[</span>--interactive<span class="o">]</span> <span class="o">[</span>--title TITLE<span class="o">]</span>
                           <span class="o">[</span>--suptitle SUPTITLE<span class="o">]</span> <span class="o">[</span>--xlabel XLABEL<span class="o">]</span>
                           <span class="o">[</span>--ylabel YLABEL<span class="o">]</span> <span class="o">[</span>--out OUT<span class="o">]</span>
                           <span class="o">[</span>--legend <span class="o">[</span>LEGEND <span class="o">[</span>LEGEND ...<span class="o">]]]</span> <span class="o">[</span>--nolegend<span class="o">]</span>
                           <span class="o">[</span>--nogrid<span class="o">]</span>

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -v, --verbose         increase verbose output
  -s SILENT, --silent SILENT
                        show only fatal errors
  --chan CHAN <span class="o">[</span>CHAN ...<span class="o">]</span>
                        Two or more channels or times, first one is compared
                        to all the others
  --ref REF             Reference channel against which others will be
                        compared
  --start START <span class="o">[</span>START ...<span class="o">]</span>
                        Starting GPS times<span class="o">(</span>required<span class="o">)</span>
  --duration DURATION   Duration <span class="o">(</span>seconds<span class="o">)</span> <span class="o">[</span>10<span class="o">]</span>
  -c FRAMECACHE, --framecache FRAMECACHE
                        use .gwf files in cache not NDS2, default use NDS2
  --highpass HIGHPASS   frequency <span class="k">for</span> high pass butterworth, default no filter
  --secpfft SECPFFT     length of fft in seconds <span class="k">for</span> each calculation
  --overlap OVERLAP     Overlap as fraction <span class="o">[</span>0-1<span class="o">)</span>
  --logx                make X-axis logarithmic, <span class="nv">default</span><span class="o">=</span>linear
  --epoch EPOCH         center X axis on this GPS time. Incompatible with logx
  --xmin XMIN           min value <span class="k">for</span> X-axis
  --xmax XMAX           max value <span class="k">for</span> X-axis
  --nologf              make frequency axis linear, <span class="nv">default</span><span class="o">=</span>logarithmic
  --fmin FMIN           min value <span class="k">for</span> frequency axis
  --fmax FMAX           max value <span class="k">for</span> frequency axis
  --logcolors           <span class="nb">set</span> intensity scale of image to logarithmic,
                        <span class="nv">default</span><span class="o">=</span>linear
  --imin IMIN           min pixel value in resulting image
  --imax IMAX           max pixek value in resulting image
  --nopct               up and lo are pixel values, <span class="nv">default</span><span class="o">=</span>percentile <span class="k">if</span> not
                        normalized
  --nocolorbar          hide the color bar
  --norm                Display the ratio of each fequency bin to the mean of
                        that frequency
  -g GEOMETRY, --geometry GEOMETRY
                        size of resulting image WxH, default: 1200x600
  --interactive         when running from ipython allows experimentation
  --title TITLE         One or more title lines
  --suptitle SUPTITLE   1st title line <span class="o">(</span>larger than the others<span class="o">)</span>
  --xlabel XLABEL       x axis text
  --ylabel YLABEL       y axis text
  --out OUT             output filename, <span class="nv">type</span><span class="o">=</span>ext <span class="o">(</span>png, pdf, jpg<span class="o">)</span>,
                        <span class="nv">default</span><span class="o">=</span>gwpy.png
  --legend <span class="o">[</span>LEGEND <span class="o">[</span>LEGEND ...<span class="o">]]</span>
                        strings to match data files
  --nolegend            <span class="k">do</span> not display legend
  --nogrid              <span class="k">do</span> not display grid lines
</pre></div>
</div>
<p class="rubric">Next</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="interactive.html">Interactive mode</a></li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, Duncan Macleod.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>